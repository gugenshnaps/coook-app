<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coook - Cafes & Restaurants</title>
    <!-- Force CSS reload with version parameter -->
    <link rel="stylesheet" href="styles.css?v=2.1">
    
    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import "./firebase-config.js";
        

        // Your web app's Firebase configuration

        console.log('üî• Firebase functions available:', Object.keys(window.firebase));
    </script>
    

</head>
<body>
    <!-- Header with avatar and city selection -->
    <header class="app-header">
        <!-- Left side - avatar and nickname -->
        <div class="user-info">
            <div class="user-avatar">
                <img id="userAvatar" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM0QTkwRTIiLz4KPHN2ZyB4PSIxMiIgeT0iMTIiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTggMTJDMTAuMjA5MSAxMiAxMiAxMC4yMDkxIDEyIDhDMTIgNS43OTA5IDEwLjIwOTEgNCA4IDRDNS43OTA5IDQgNCA1Ljc5MDkgNCA4QzQgMTAuMjA5MSA1Ljc5MDkgNCA4IDRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOCAxNEMxMC4yMDkxIDE0IDEyIDEyLjIwOTEgMTIgMTBDMTIgOS43OTA5IDEwLjIwOTEgOCA4IDhDNi4yMDkxIDggNCA5Ljc5MDkgNCAxMkM0IDEyLjIwOTEgNi4yMDkxIDE0IDggMTRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4KPC9zdmc+" alt="Avatar">
            </div>
            <div class="user-details">
                <div id="userName" class="user-name">Loading...</div>
                <div class="user-status">Online</div>
            </div>
        </div>
        
        <!-- Right side - city selection -->
        <div class="city-selector">
            <select id="citySelect" class="city-select">
                <option value="">Loading cities...</option>
            </select>
        </div>
    </header>

            <!-- Main content -->
        <main class="main-content">
                    <!-- App menu -->
        <div class="app-menu">
            <button class="menu-item loyalty-btn">
                <span class="menu-icon">üéØ</span>
                <span class="menu-text">My Loyalty</span>
            </button>
            <button class="menu-item favorites-btn">
                <span class="menu-icon">‚ù§Ô∏è</span>
                <span class="menu-text">Favorites</span>
            </button>
        </div>
        
        <!-- Cafe list -->
        <div id="cafesList" class="cafes-list">
            <div class="loading">Select a city to see cafes</div>
        </div>
        
        <!-- No cafes message -->
        <div id="noCafes" class="no-cafes" style="display: none;">
            <p>No cafes in this city yet</p>
        </div>
    </main>

    <!-- Cafe details modal -->
    <div id="modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <!-- QR Code Library - Using QR-Server API (free and reliable) -->
    <script>
        console.log('üîç Using QR-Server API for QR codes - no external libraries needed!');
    </script>
    <script>
        // Check if library loaded (delayed to not block initial loading)
        setTimeout(() => {
            console.log('üîç QR Library check (background):');
            console.log('   - window.QRCode:', !!window.QRCode);
            console.log('   - window.qrcode:', !!window.qrcode);
            console.log('   - window.qrcodeGenerator:', !!window.qrcodeGenerator);
            
            if (window.QRCode) {
                console.log('‚úÖ QRCode library loaded successfully');
            } else if (window.qrcode) {
                console.log('‚úÖ qrcode library loaded successfully');
            } else {
                console.log('‚ÑπÔ∏è No QR libraries loaded (using QR-Server API instead)');
            }
        }, 5000); // Delayed to 5 seconds to not block initial loading
    </script>
    
    <script type="module" src="user-system.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>
